"use strict";var root=this,legit,ensure;!function(){function a(a){var b;if(this.rules=[],a&&ensure.isObject(a))for(b in a)a.hasOwnProperty(b)&&(ensure.isArray(a[b])?a[b].forEach(function(a){this.addRule(b,a)},this):this.addRule(b,a[b]))}function b(){this.message="Default validation rule"}function c(){this.failedRules=[]}function d(a,c){b.call(this,arguments),ensure(a,Number),ensure(c,Number),this.min=a,this.max=c}function e(a,c){b.call(this,arguments),ensure(a,Number),ensure(c,Number),this.min=a,this.max=c}function f(a){b.call(this,arguments),ensure(a,Array),this.validValues=a}function g(){b.call(this,arguments)}function h(a){b.call(this,arguments),this.fieldName=a}legit={},a.prototype.addRule=function(a,c,d){ensure(a,String),ensure(c,b),void 0===this.rules[a]&&(this.rules[a]=[]);var e={rule:c,customMessage:d};this.rules[a].push(e)},a.prototype.validate=function(a){var b,d=new c,e=0;for(b in this.rules)this.rules.hasOwnProperty(b)&&this.rules[b].forEach(function(c){c.rule.execute(a[b],a,b)||(d.addFailedRule(b,a[b],c.rule,c.customMessage),e+=1)});if(e>0)throw d;return!0},b.prototype.execute=function(){return!0},b.prototype.getMessage=function(){return this.message},c.prototype=new Error,c.prototype.constructor=c,c.prototype.addFailedRule=function(a,c,d,e){ensure(a,String),ensure(d,b),this.failedRules.push({field:a,value:c,rule:d,message:e||d.getMessage(a)})},c.prototype.getMessages=function(){var a=[];return a=this.failedRules.map(function(a){return a.message})},c.prototype.getFailedRules=function(){return this.failedRules},d.prototype=new b,d.prototype.getMessage=function(a){return a+" must be a number between "+this.min+" to "+this.max},d.prototype.execute=function(a){return ensure.isNotNumber(a)?!1:a<this.min||a>this.max?!1:!0},e.prototype=new b,e.prototype.getMessage=function(a){return a+" must be between "+this.min+" to "+this.max+" characters long"},e.prototype.execute=function(a){return ensure.isNotString(a)?!1:a.length<this.min||a.length>this.max?!1:!0},f.prototype=new b,f.prototype.getMessage=function(a){var b="";return this.validValues.forEach(function(a){b+=a+" "}),a+" must be equal to one of the following values: "+b},f.prototype.execute=function(a){return ensure.isIn(a,this.validValues)},g.prototype=new b,g.prototype.getMessage=function(a){return a+" is required"},g.prototype.execute=function(a,b,c){return b.hasOwnProperty(c)},h.prototype=new b,h.prototype.getMessage=function(a){return a+" must match "+this.fieldName},h.prototype.execute=function(a,b){return b.hasOwnProperty(this.fieldName)&&b[this.fieldName]===a?!0:!1},legit.Validator=a,legit.ValidationRule=b,legit.ValidationError=c,legit.MinMaxRule=d,legit.MinMaxLengthRule=e,legit.InArrayRule=f,legit.RequiredRule=g,legit.EqualsFieldRule=h,"undefined"!=typeof module&&module.exports?(module.exports=legit,ensure=require("ensure.js")):ensure=root.ensure,root.legit=legit}(),function(){var a;a=function(a,b){legit.ValidationRule.call(this,arguments),this.regex=a,this.customMessage=b},a.prototype=new legit.ValidationRule,a.prototype.execute=function(a){return ensure.isString(a)?null!==a.match(this.regex):!1},a.prototype.getMessage=function(a){return this.customMessage?this.customMessage:a+" does not match the expected value"},legit.RegexMatchRule=a}(),function(){var a;a=function(a){legit.ValidationRule.call(this,arguments),this.typeCheck=a},a.prototype=new legit.ValidationRule,a.prototype.execute=function(a){return ensure(a,this.typeCheck,!0)},a.prototype.getMessage=function(a){return a+" should be of type "+this.typeCheck.name},legit.TypeRule=a}();